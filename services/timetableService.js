// Timetable data and initialization service

const timetables = [
  // run_number 1
  [1, 1, 127, '00:00', 0],
  [2, 1, 127, '00:50', 0],
  [3, 1, 127, '01:30', 0],
  [4, 1, 127, '01:45', 0],
  [5, 1, 127, '02:10', 0],
  [6, 1, 127, '02:20', 0],
  [7, 1, 127, '02:50', 0],
  [8, 1, 127, '03:00', 0],
  [9, 1, 127, '03:30', 0],
  [10, 1, 127, '03:40', 0],
  [11, 1, 127, '05:00', 0],
  [12, 1, 127, '05:30', 0],
  [13, 1, 127, '06:45', 0],
  [14, 1, 127, '07:15', 0],
  [15, 1, 127, '08:45', 0],
  // run_number 1 for line_stop_id 16-30
  [16, 1, 127, '08:45', 0],
  [17, 1, 127, '10:15', 0],
  [18, 1, 127, '10:45', 0],
  [19, 1, 127, '12:00', 0],
  [20, 1, 127, '12:30', 0],
  [21, 1, 127, '13:50', 0],
  [22, 1, 127, '14:00', 0],
  [23, 1, 127, '14:30', 0],
  [24, 1, 127, '14:40', 0],
  [25, 1, 127, '15:10', 0],
  [26, 1, 127, '15:20', 0],
  [27, 1, 127, '15:45', 0],
  [28, 1, 127, '16:00', 0],
  [29, 1, 127, '16:40', 0],
  [30, 1, 127, '17:30', 0],
  // run_number 1 for line_stop_id 31-42
  [31, 1, 127, '03:00', 0],
  [32, 1, 127, '03:30', 0],
  [33, 1, 127, '03:40', 0],
  [34, 1, 127, '04:00', 0],
  [35, 1, 127, '04:20', 0],
  [36, 1, 127, '04:50', 0],
  [37, 1, 127, '05:45', 0],
  [38, 1, 127, '06:00', 0],
  [39, 1, 127, '06:30', 0],
  [40, 1, 127, '06:55', 0],
  [41, 1, 127, '07:20', 0],
  [42, 1, 127, '07:40', 0],
  // run_number 1 for line_stop_id 43-54
  [43, 1, 127, '07:40', 0],
  [44, 1, 127, '08:00', 0],
  [45, 1, 127, '08:25', 0],
  [46, 1, 127, '08:50', 0],
  [47, 1, 127, '09:10', 0],
  [48, 1, 127, '09:30', 0],
  [49, 1, 127, '09:50', 0],
  [50, 1, 127, '10:00', 0],
  [51, 1, 127, '10:30', 0],
  [52, 1, 127, '11:00', 0],
  [53, 1, 127, '11:30', 0],
  [54, 1, 127, '12:00', 0],
  // run_number 2
  [1, 2, 127, '03:30', 0],
  [2, 2, 127, '04:20', 0],
  [3, 2, 127, '05:00', 0],
  [4, 2, 127, '05:15', 0],
  [5, 2, 127, '05:40', 0],
  [6, 2, 127, '05:50', 0],
  [7, 2, 127, '06:20', 0],
  [8, 2, 127, '06:30', 0],
  [9, 2, 127, '07:00', 0],
  [10, 2, 127, '07:10', 0],
  [11, 2, 127, '08:30', 0],
  [12, 2, 127, '09:00', 0],
  [13, 2, 127, '10:15', 0],
  [14, 2, 127, '10:45', 0],
  [15, 2, 127, '12:15', 0],
  // run_number 2 for line_stop_id 16-30
  [16, 2, 127, '12:15', 0],
  [17, 2, 127, '13:45', 0],
  [18, 2, 127, '14:15', 0],
  [19, 2, 127, '15:30', 0],
  [20, 2, 127, '16:00', 0],
  [21, 2, 127, '17:20', 0],
  [22, 2, 127, '17:30', 0],
  [23, 2, 127, '18:00', 0],
  [24, 2, 127, '18:10', 0],
  [25, 2, 127, '18:40', 0],
  [26, 2, 127, '18:50', 0],
  [27, 2, 127, '19:15', 0],
  [28, 2, 127, '19:30', 0],
  [29, 2, 127, '20:10', 0],
  [30, 2, 127, '21:00', 0],
  // run_number 2 for line_stop_id 31-42
  [31, 2, 127, '06:30', 0],
  [32, 2, 127, '07:00', 0],
  [33, 2, 127, '07:10', 0],
  [34, 2, 127, '07:30', 0],
  [35, 2, 127, '07:50', 0],
  [36, 2, 127, '08:20', 0],
  [37, 2, 127, '09:15', 0],
  [38, 2, 127, '09:30', 0],
  [39, 2, 127, '10:00', 0],
  [40, 2, 127, '10:25', 0],
  [41, 2, 127, '10:50', 0],
  [42, 2, 127, '11:10', 0],
  [43, 2, 127, '11:30', 0],
  [44, 2, 127, '11:55', 0],
  [45, 2, 127, '12:25', 0],
  [46, 2, 127, '12:45', 0],
  [47, 2, 127, '13:15', 0],
  [48, 2, 127, '14:10', 0],
  [49, 2, 127, '14:25', 0],
  [50, 2, 127, '14:55', 0],
  [51, 2, 127, '15:20', 0],
  [52, 2, 127, '15:45', 0],
  [53, 2, 127, '16:05', 0],
  // run_number 3
  [1, 3, 127, '07:15', 0],
  [2, 3, 127, '08:05', 0],
  [3, 3, 127, '08:45', 0],
  [4, 3, 127, '09:00', 0],
  [5, 3, 127, '09:25', 0],
  [6, 3, 127, '09:35', 0],
  [7, 3, 127, '10:05', 0],
  [8, 3, 127, '10:15', 0],
  [9, 3, 127, '10:45', 0],
  [10, 3, 127, '10:55', 0],
  [11, 3, 127, '12:15', 0],
  [12, 3, 127, '12:45', 0],
  [13, 3, 127, '14:00', 0],
  [14, 3, 127, '14:30', 0],
  [15, 3, 127, '16:00', 0],
  // run_number 3 for line_stop_id 16-30
  [16, 3, 127, '16:00', 0],
  [17, 3, 127, '17:30', 0],
  [18, 3, 127, '18:00', 0],
  [19, 3, 127, '19:15', 0],
  [20, 3, 127, '19:45', 0],
  [21, 3, 127, '21:05', 0],
  [22, 3, 127, '21:15', 0],
  [23, 3, 127, '21:45', 0],
  [24, 3, 127, '21:55', 0],
  [25, 3, 127, '22:25', 0],
  [26, 3, 127, '22:35', 0],
  [27, 3, 127, '23:00', 0],
  [28, 3, 127, '23:15', 0],
  [29, 3, 127, '23:55', 0],
  [30, 3, 127, '00:45', 1],
  // run_number 3 for line_stop_id 31-42
  [31, 3, 127, '10:00', 0],
  [32, 3, 127, '10:30', 0],
  [33, 3, 127, '10:40', 0],
  [34, 3, 127, '11:00', 0],
  [35, 3, 127, '11:20', 0],
  [36, 3, 127, '11:50', 0],
  [37, 3, 127, '12:45', 0],
  [38, 3, 127, '13:00', 0],
  [39, 3, 127, '13:30', 0],
  [40, 3, 127, '13:55', 0],
  [41, 3, 127, '14:20', 0],
  [42, 3, 127, '14:40', 0],
  // run_number 4
  [1, 4, 127, '12:00', 0],
  [2, 4, 127, '12:50', 0],
  [3, 4, 127, '13:30', 0],
  [4, 4, 127, '13:45', 0],
  [5, 4, 127, '14:10', 0],
  [6, 4, 127, '14:20', 0],
  [7, 4, 127, '14:50', 0],
  [8, 4, 127, '15:00', 0],
  [9, 4, 127, '15:30', 0],
  [10, 4, 127, '15:40', 0],
  [11, 4, 127, '17:00', 0],
  [12, 4, 127, '17:30', 0],
  [13, 4, 127, '18:45', 0],
  [14, 4, 127, '19:15', 0],
  [15, 4, 127, '20:45', 0],
  // run_number 4 for line_stop_id 16-30
  [16, 4, 127, '20:45', 0],
  [17, 4, 127, '22:15', 0],
  [18, 4, 127, '22:45', 0],
  [19, 4, 127, '00:00', 1],
  [20, 4, 127, '00:30', 1],
  [21, 4, 127, '01:50', 1],
  [22, 4, 127, '02:00', 1],
  [23, 4, 127, '02:30', 1],
  [24, 4, 127, '02:40', 1],
  [25, 4, 127, '03:10', 1],
  [26, 4, 127, '03:20', 1],
  [27, 4, 127, '03:45', 1],
  [28, 4, 127, '04:00', 1],
  [29, 4, 127, '04:40', 1],
  [30, 4, 127, '05:30', 1],
  // run_number 4 for line_stop_id 31-42
  [31, 4, 127, '15:00', 0],
  [32, 4, 127, '15:30', 0],
  [33, 4, 127, '15:40', 0],
  [34, 4, 127, '16:00', 0],
  [35, 4, 127, '16:20', 0],
  [36, 4, 127, '16:50', 0],
  [37, 4, 127, '17:45', 0],
  [38, 4, 127, '18:00', 0],
  [39, 4, 127, '18:30', 0],
  [40, 4, 127, '18:55', 0],
  [41, 4, 127, '19:20', 0],
  [42, 4, 127, '19:40', 0],
  [43, 4, 127, '19:40', 0],
  [44, 4, 127, '20:00', 0],
  [45, 4, 127, '20:25', 0],
  [46, 4, 127, '20:55', 0],
  [47, 4, 127, '21:15', 0],
  [48, 4, 127, '21:45', 0],
  [49, 4, 127, '22:40', 0],
  [50, 4, 127, '22:55', 0],
  [51, 4, 127, '23:25', 0],
  [52, 4, 127, '23:50', 0],
];

/**
 * Initialize timetables in the database
 * @param {Object} db - Database connection object
 */
async function initializeTimetables(db) {
  const [timetableRows] = await db.query('SELECT COUNT(*) as count FROM timetable');
  if (timetableRows[0].count === 0) {
    await db.query(
      'INSERT INTO timetable (line_stop_id, run_number, day_mask, departure_time, offset_days) VALUES ?',
      [timetables]
    );
    console.log('Timetables inserted into timetable table.');
  }
}

module.exports = {
  initializeTimetables
};
